language: node_js
node_js:
  - node # uses most recent stable node version
services:
  - postgresql # starts up postgres
addons:
  postgresql: '9.6' # highest available postgres version on Travis
dist: trusty # uses trusty environment
sudo: false # when on trusty, uses Docker containers for speed
notifications:
  email:
    on_success: change # default: change (only when going from broken to fixed)
    on_failure: always # default: always (which is annoying, as it should be)
install:
  - npm ci # faster, goes only from package-lock
before_script:
  - psql -c 'create database "deployment-exercise-test";' -U postgres # remember to change this name if you change it elsewhere (e.g. package.json)
before_deploy: # omit node_modules, since we set skip_cleanup below
  - rm -rf node_modules
deploy: # see README for details on these keys
  # prevents travis from deleting the build
  skip_cleanup: true
  provider: heroku
  # app should be your heroku app name; see README
  app: shielded-hamlet-41176
  # the secure key indicates an encrypted value; see README
  api_key:
    secure: No3mtmGeTc3PaTvWTzvHMeK3H8+Wj/bAxvhAAklJkXBNDE7nrgSg6Y1QcxTfUKMZ0d+AP0RgCnCWpuiuW04HCMn+zNkhYj2x/JeF2Oc8DX/4WTJOEYUh8kVdLBmQYGNHOJgZ8IDMIijuyl2tkkb5LJHoSR/q4ZK/OVq6Nl09AwwWQR9PQPWba3qL498xIWFtD1hcgi3VMjS7RV49uSb9ozyv+uH5tAbLtw2LwHf6dxs3GmS+LidQW/2iHGPvkHbZgipEZHvp8m4xL2o9P6pcrF2g5P/FUqi/FaEtVAGkc6DVXf9SxPxz0jvIVSZpwM5FzqegJf4tfJ8CsLKyUzP9J6wbc2oVYiSrVDMR4LWao0cki9rRn6vyq+NdAbcrFbDNzZS/0isE9uBI9750w7AvtSShcsKVfbGt39r4TNdo04xkyec1YLAE8VtvD6fz2DA4bVPHUHEDFxfFUP3EvWw9Mz/pu0jOGe5IyQgtRXA4fqkln+oOcsLpiHETtUgdhogKRqntmewX/jbtG0kmwPlRAko1Q7NhdaFky2MiN9P7SRlJn6USW9ZfdDM5cbfgfr+CP6DK4tqTd2ygoiRraOAGq0hweyAwCVbjr6H6kSq+f9L/+UyMJ3w1dm5DKzmVVzXZuxWDVXbaOshVMpJJj6IZFQhq76qS0p3+CRX0NSHxc1M=
